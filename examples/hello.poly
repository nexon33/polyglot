// hello.poly - Simple hello world demo
//
// Demonstrates the unified #[lang] { } syntax with braces
//
// Build: polyglot build hello.poly

// ═══════════════════════════════════════════════════════════════════════════
// Rust Block - Main entry point
// ═══════════════════════════════════════════════════════════════════════════

#[rust] {
    pub fn main() {
        println!("Hello from Poly!");
        
        let numbers = vec![1, 2, 3, 4, 5];
        let sum: i32 = numbers.iter().sum();
        println!("Sum of 1-5 = {}", sum);
        
        let doubled: Vec<i32> = numbers.iter().map(|x| x * 2).collect();
        println!("Doubled: {:?}", doubled);
    }
}

// ═══════════════════════════════════════════════════════════════════════════
// Python Block - Utility functions
// ═══════════════════════════════════════════════════════════════════════════

#[python] {
    def greet(name):
        """Python function to greet someone"""
        return f"Hello, {name}!"

    def calculate_stats(values):
        """Calculate basic statistics"""
        n = len(values)
        mean = sum(values) / n
        return {"count": n, "sum": sum(values), "mean": mean}
}

// ═══════════════════════════════════════════════════════════════════════════
// JavaScript Block - Frontend helpers
// ═══════════════════════════════════════════════════════════════════════════

#[js] {
    const render = (data) => {
        console.log("Rendering:", data);
        return { type: "chart", data: data };
    };

    const formatCurrency = (amount, currency = "USD") => {
        return `${currency} ${amount.toFixed(2)}`;
    };
}
